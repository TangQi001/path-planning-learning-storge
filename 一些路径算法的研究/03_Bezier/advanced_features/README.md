# é«˜çº§ç‰¹æ€§æ¨¡å—

## æ¨¡å—æ¦‚è¿°

æœ¬æ¨¡å—æä¾›Bezieræ›²çº¿è·¯å¾„è§„åˆ’çš„é«˜çº§æ‰©å±•åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬ï¼š

### ğŸ”§ Bæ ·æ¡æ‰©å±• (bspline_extension.py)

Bæ ·æ¡æ›²çº¿ä½œä¸ºBezieræ›²çº¿çš„"å‡çº§ç‰ˆ"ï¼Œè§£å†³äº†Bezieræ›²çº¿åœ¨é•¿è·¯å¾„è§„åˆ’ä¸­çš„å±€é™æ€§ã€‚

#### ä¸»è¦ä¼˜åŠ¿

1. **ğŸ¯ å±€éƒ¨æ§åˆ¶æ€§**
   - ä¿®æ”¹ä¸€ä¸ªæ§åˆ¶ç‚¹åªå½±å“å±€éƒ¨åŒºåŸŸ
   - é¿å…"ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«"çš„é—®é¢˜

2. **ğŸ”— æ›´å¥½çš„è¿ç»­æ€§**
   - å¤©ç„¶æ”¯æŒCÂ²è¿ç»­æ€§
   - æ— éœ€æ‰‹åŠ¨è°ƒæ•´è¿æ¥ç‚¹

3. **ğŸ“ é€‚åˆé•¿è·¯å¾„**
   - å•æ¡æ›²çº¿å¯å¤„ç†å¤šä¸ªèˆªç‚¹
   - é¿å…é¾™æ ¼ç°è±¡

4. **ğŸ”§ çµæ´»æ€§å¼º**
   - é€šè¿‡èŠ‚ç‚¹å‘é‡ç²¾ç¡®æ§åˆ¶å½¢çŠ¶
   - æ”¯æŒå¤šç§æ‹Ÿåˆç­–ç•¥

#### ä¸Bezieræ›²çº¿çš„å¯¹æ¯”

| ç‰¹æ€§ | Bezieræ›²çº¿ | Bæ ·æ¡æ›²çº¿ |
|------|------------|-----------|
| æ§åˆ¶æ–¹å¼ | å…¨å±€å½±å“ | å±€éƒ¨æ§åˆ¶ âœ“ |
| è¿ç»­æ€§ | éœ€æ‰‹åŠ¨ä¿è¯ | å¤©ç„¶CÂ²è¿ç»­ âœ“ |
| é•¿è·¯å¾„å¤„ç† | éœ€åˆ†æ®µ | å•æ¡æ›²çº¿ âœ“ |
| è®¡ç®—å¤æ‚åº¦ | ç®€å• âœ“ | ç›¸å¯¹å¤æ‚ |
| å®æ—¶æ€§ | ä¼˜ç§€ âœ“ | ä¸€èˆ¬ |

#### åº”ç”¨åœºæ™¯

**æ¨èä½¿ç”¨Bæ ·æ¡çš„æƒ…å†µï¼š**
- é•¿è·ç¦»è·¯å¾„è§„åˆ’ï¼ˆèˆªç‚¹æ•° > 6ï¼‰
- éœ€è¦é¢‘ç¹å±€éƒ¨è°ƒæ•´è·¯å¾„
- å¯¹è·¯å¾„è¿ç»­æ€§è¦æ±‚å¾ˆé«˜
- å¤æ‚åœ°å½¢è·Ÿéš

**æ¨èä½¿ç”¨Bezieræ›²çº¿çš„æƒ…å†µï¼š**
- çŸ­è·ç¦»è·¯å¾„è§„åˆ’ï¼ˆèˆªç‚¹æ•° â‰¤ 6ï¼‰
- å®æ—¶è·¯å¾„è§„åˆ’
- è®¡ç®—èµ„æºå—é™
- ç®€å•çš„ç‚¹å¯¹ç‚¹è¿æ¥

## ä½¿ç”¨ç¤ºä¾‹

```python
from bspline_extension import BSplineCurve, demo_bspline_vs_bezier

# åˆ›å»ºBæ ·æ¡æ›²çº¿
waypoints = [Point(0,0), Point(2,3), Point(4,1), Point(6,4)]
bspline = BSplineCurve(waypoints, degree=3)

# é‡‡æ ·è·¯å¾„ç‚¹
path_points = bspline.sample_points(100)

# è¿è¡Œå¯¹æ¯”æ¼”ç¤º
demo_bspline_vs_bezier()
```

## æŠ€æœ¯ç»†èŠ‚

### Bæ ·æ¡åŸºå‡½æ•°è®¡ç®—

Bæ ·æ¡æ›²çº¿é€šè¿‡åŸºå‡½æ•°çš„çº¿æ€§ç»„åˆå®šä¹‰ï¼š

$$C(t) = \sum_{i=0}^{n} N_{i,p}(t) \cdot P_i$$

å…¶ä¸­ $N_{i,p}(t)$ æ˜¯Bæ ·æ¡åŸºå‡½æ•°ï¼Œé€šè¿‡é€’å½’å…¬å¼è®¡ç®—ï¼š

$$N_{i,0}(t) = \begin{cases} 
1 & \text{if } u_i \leq t < u_{i+1} \\
0 & \text{otherwise}
\end{cases}$$

$$N_{i,p}(t) = \frac{t - u_i}{u_{i+p} - u_i} N_{i,p-1}(t) + \frac{u_{i+p+1} - t}{u_{i+p+1} - u_{i+1}} N_{i+1,p-1}(t)$$

### èŠ‚ç‚¹å‘é‡è®¾è®¡

å‡åŒ€èŠ‚ç‚¹å‘é‡ç”¨äºç”Ÿæˆæ ‡å‡†Bæ ·æ¡ï¼š
- å¼€å§‹é‡å¤èŠ‚ç‚¹ï¼š$[0, 0, 0, 0, ...]$
- å†…éƒ¨å‡åŒ€èŠ‚ç‚¹ï¼š$[..., 0.25, 0.5, 0.75, ...]$
- ç»“æŸé‡å¤èŠ‚ç‚¹ï¼š$[..., 1, 1, 1, 1]$

## æ‰©å±•æ–¹å‘

1. **éå‡åŒ€Bæ ·æ¡ï¼ˆNURBSï¼‰**
   - æ”¯æŒæƒé‡æ§åˆ¶
   - ç²¾ç¡®è¡¨ç¤ºåœ†é”¥æ›²çº¿

2. **è‡ªé€‚åº”èŠ‚ç‚¹å‘é‡**
   - æ ¹æ®æ›²ç‡è‡ªåŠ¨è°ƒæ•´èŠ‚ç‚¹åˆ†å¸ƒ
   - ä¼˜åŒ–è®¡ç®—æ•ˆç‡

3. **çº¦æŸä¼˜åŒ–**
   - é›†æˆåŠ¨åŠ›å­¦çº¦æŸ
   - å¤šç›®æ ‡ä¼˜åŒ–

4. **å®æ—¶ç®—æ³•**
   - å¿«é€Ÿæ±‚å€¼ç®—æ³•
   - å¢é‡æ›´æ–°æ–¹æ³• 